!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=f.p+""+e+"."+m+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=f.p+""+m+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(i){return e(i)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var i=JSON.parse(t.responseText)}catch(r){return void e(r)}e(null,i)}}}function i(e){function t(e,t){"ready"===x&&a("prepare"),P++,f.e(e,function(){function n(){P--,"prepare"===x&&(j[e]||l(e),0===P&&0===O&&c())}try{t.call(null,i)}finally{n()}})}var n=S[e];if(!n)return f;var i=function(t){return n.hot.active?S[t]?(S[t].parents.indexOf(e)<0&&S[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):b=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),b=[]),f(t)};for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&(Object.defineProperty?Object.defineProperty(i,r,function(e){return{configurable:!0,enumerable:!0,get:function(){return f[e]},set:function(t){f[e]=t}}}(r)):i[r]=f[r]);return Object.defineProperty?Object.defineProperty(i,"e",{enumerable:!0,value:t}):i.e=t,i}function r(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._acceptedDependencies[e[i]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:o,apply:h,status:function(e){return e?void _.push(e):x},addStatusHandler:function(e){_.push(e)},removeStatusHandler:function(e){var t=_.indexOf(e);t>=0&&_.splice(t,1)},data:w[e]};return t}function a(e){x=e;for(var t=0;t<_.length;t++)_[t].call(null,e)}function s(e){var t=+e+""===e;return t?+e:e}function o(e,t){if("idle"!==x)throw new Error("check() is only allowed in idle status");"function"==typeof e?(v=!1,t=e):(v=e,t=t||function(e){if(e)throw e}),a("check"),n(function(e,n){if(e)return t(e);if(!n)return a("idle"),void t(null,null);k={},T={},j={};for(var i=0;i<n.c.length;i++)T[n.c[i]]=!0;y=n.h,a("prepare"),d=t,g={};var r=0;l(r),"prepare"===x&&0===P&&0===O&&c()})}function u(e,t){if(T[e]&&k[e]){k[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(g[n]=t[n]);0===--O&&0===P&&c()}}function l(e){T[e]?(k[e]=!0,O++,t(e)):j[e]=!0}function c(){a("ready");var e=d;if(d=null,e)if(v)h(v,e);else{var t=[];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&t.push(s(n));e(null,t)}}function h(t,n){function i(e){for(var t=[e],n={},i=t.slice();i.length>0;){var a=i.pop(),e=S[a];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+a);if(0===a)return;for(var s=0;s<e.parents.length;s++){var o=e.parents[s],u=S[o];if(u.hot._declinedDependencies[a])return new Error("Aborted because of declined dependency: "+a+" in "+o);t.indexOf(o)>=0||(u.hot._acceptedDependencies[a]?(n[o]||(n[o]=[]),r(n[o],[a])):(delete n[o],t.push(o),i.push(o)))}}}return[t,n]}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}}if("ready"!==x)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var o={},u=[],l={};for(var c in g)if(Object.prototype.hasOwnProperty.call(g,c)){var h=s(c),p=i(h);if(!p){if(t.ignoreUnaccepted)continue;return a("abort"),n(new Error("Aborted because "+h+" is not accepted"))}if(p instanceof Error)return a("abort"),n(p);l[h]=g[h],r(u,p[0]);for(var h in p[1])Object.prototype.hasOwnProperty.call(p[1],h)&&(o[h]||(o[h]=[]),r(o[h],p[1][h]))}for(var d=[],v=0;v<u.length;v++){var h=u[v];S[h]&&S[h].hot._selfAccepted&&d.push({module:h,errorHandler:S[h].hot._selfAccepted})}a("dispose");for(var _=u.slice();_.length>0;){var h=_.pop(),O=S[h];if(O){for(var P={},j=O.hot._disposeHandlers,k=0;k<j.length;k++){var T=j[k];T(P)}w[h]=P,O.hot.active=!1,delete S[h];for(var k=0;k<O.children.length;k++){var A=S[O.children[k]];if(A){var M=A.parents.indexOf(h);M>=0&&A.parents.splice(M,1)}}}}for(var h in o)if(Object.prototype.hasOwnProperty.call(o,h))for(var O=S[h],E=o[h],k=0;k<E.length;k++){var B=E[k],M=O.children.indexOf(B);M>=0&&O.children.splice(M,1)}a("apply"),m=y;for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(e[h]=l[h]);var D=null;for(var h in o)if(Object.prototype.hasOwnProperty.call(o,h)){for(var O=S[h],E=o[h],C=[],v=0;v<E.length;v++){var B=E[v],T=O.hot._acceptedDependencies[B];C.indexOf(T)>=0||C.push(T)}for(var v=0;v<C.length;v++){var T=C[v];try{T(o)}catch(H){D||(D=H)}}}for(var v=0;v<d.length;v++){var R=d[v],h=R.module;b=[h];try{f(h)}catch(H){if("function"==typeof R.errorHandler)try{R.errorHandler(H)}catch(H){D||(D=H)}else D||(D=H)}}return D?(a("fail"),n(D)):(a("idle"),void n(null,u))}function f(t){if(S[t])return S[t].exports;var n=S[t]={exports:{},id:t,loaded:!1,hot:r(t),parents:b,children:[]};return e[t].call(n.exports,n,n.exports,i(t)),n.loaded=!0,n.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){u(e,t),p&&p(e,t)};var d,g,y,v=!0,m="bf3a194c8d12563367d3",w={},b=[],_=[],x="idle",O=0,P=0,j={},k={},T={},S={};return f.m=e,f.c=S,f.p="http://localhost:3000/public/build",f.h=function(){return m},i(0)(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(6),a=i(r),s=new Phaser.Game(704,320,Phaser.AUTO);s.state.add("Game",a["default"],!0)},function(e,t){"use strict";function n(e,t){return i(e,t)<0}function i(e,t){return f(t.x-e.x)+f(t.y-e.y)-f(e.config.range)}function r(e,t){return f(e.x-t.x)+f(e.y-t.y)}function a(e,t){return{x:Math.floor(e.x*t),y:Math.floor(e.y*t)}}function s(e,t){var n=t.x-e.x,i=t.y-e.y,r=Math.atan(i/n);return 0>n&&(r=Math.PI+r),r}function o(e,t){var n=e.config?e.config.width/2:0,i=e.config?e.config.height/2:0;return e.x>=t.x-n&&e.x<t.x+t.config.width+n&&e.y>=t.y-i&&e.y<t.y+t.config.height+i}function u(e,t){return(e.x>=t.x&&e.x<t.x+t.config.width||e.x+e.config.width>t.x&&e.x+e.config.width<t.x+t.config.width)&&(e.y>=t.y&&e.y<t.y+t.config.height||e.y+e.config.height>t.y&&e.y+e.config.height<t.y+t.config.height)}function l(e,t){return f(e.x-t.x-t.config.width/2)+f(e.y-t.y-t.config.height/2)<f(e.config.splash)}function c(e,t){return Math.round(Math.random()*(t-e))+e}function h(e){var t=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return e-e%t}Object.defineProperty(t,"__esModule",{value:!0}),t.inRange=n,t.inRangeDiff=i,t.distance2=r,t.scale=a,t.getAngle=s,t.inObject=o,t.isOverlap=u,t.inSplash=l,t.random=c,t.round=h;var f=(Math.sqrt,function(e){return e*e})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(e,r,a,s){n(this,t);var o=i(this,Object.getPrototypeOf(t).call(this,e,a,s,r.name));return o.config=r,o.width=r.width,o.height=r.height,o.game.physics.startSystem(Phaser.Physics.ARCADE),o.game.add.existing(o),o.animations.add("move"),o.animations.play("move",4,!0),o.checkWorldBounds=!0,o.outOfBoundsKill=!0,o}return r(t,e),t}(Phaser.Sprite);t["default"]=a},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){return e&&e.textures?e.textures.map(function(e,n){return[t+"."+n,e]}).concat(a(e.shot,t+".shot")).concat(a(e.death,t+".death")):[]}Object.defineProperty(t,"__esModule",{value:!0}),t.units=t.towers=t.assets=t.iceTower=t.cannonTower=t.arrowTower=t.recruit=t.peasant=t.spawn=t.rock=t.sand=t.grass=void 0;var s=n(13),o=r(s),u=n(18),l=r(u),c=n(17),h=r(c),f=n(19),p=r(f),d=n(15),g=r(d),y=n(16),v=r(y),m=n(11),w=r(m),b=n(12),_=r(b),x=n(14),O=r(x),P=n(3),j=i(P);t.grass=o["default"],t.sand=l["default"],t.rock=h["default"],t.spawn=p["default"],t.peasant=g["default"],t.recruit=v["default"],t.arrowTower=w["default"],t.cannonTower=_["default"],t.iceTower=O["default"];t.assets=Object.keys(j).reduce(function(e,t){return e.concat(a(j[t],t))},[]),t.towers=Object.keys(j).map(function(e){return j[e]}).filter(function(e){return"tower"===e.type}),t.units=Object.keys(j).map(function(e){return j[e]}).filter(function(e){return"unit"===e.type})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(1),l=n(2),c=i(l),h=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),o(t,[{key:"update",value:function(){var e=100*this.config.movementSpeed;this.config.homing&&this.target&&(this.angle=(0,u.getAngle)(this,this.target)),this.body.velocity.x=e*Math.cos(this.angle),this.body.velocity.y=e*Math.sin(this.angle)}},{key:"clearTarget",value:function(e){this.target===e&&(this.target=null)}},{key:"setTarget",value:function(e){this.target=e,this.angle=(0,u.getAngle)(this,e)}}]),t}(c["default"]);t["default"]=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),l=i(u),c=n(4),h=i(c),f=n(1),p=function(e){function t(){var e;r(this,t);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var o=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return o.fireInterval=1e3/o.config.attackSpeed,o.lastShotAt=0,o}return s(t,e),o(t,[{key:"setTarget",value:function(e){if(!this.target||!(0,f.inRange)(this,this.target)){for(var t,n,i=1/0,r=0;r<e.children.length;r++)e.children[r].exists&&(n=(0,f.inRangeDiff)(this,e.children[r]),0>=n&&i>n&&(i=n,t=e.children[r]));this.target=t||null}}},{key:"clearTarget",value:function(e){this.target===e&&(this.target=null)}},{key:"fire",value:function(e){var t=Date.now();if(this.target){if(this.lastShotAt+this.fireInterval>t)return null;var n=new h["default"](this.game,this.config.shot,this.x,this.y);n.setTarget(this.target),e.add(n),this.lastShotAt=t}}}]),t}(l["default"]);t["default"]=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(10),o=n(3),u=n(1),l=n(8),c=i(l),h=n(7),f=i(h),p=n(5),d=i(p),g=32,y={s:.25,m:.5,l:1},v=function(){function e(){r(this,e),this.map=(0,s.getFirst)()}return a(e,[{key:"preload",value:function(){var e=this;this.load.image("grass","images/grass_3.png"),this.load.image("font","images/PressStart2P.png"),this.load.spritesheet("spawn","images/spawn.png",g,g),o.units.concat(o.towers).reduce(function(e,t){return e.concat(t).concat(t.shot).concat(t.shot&&t.shot.buff)},[]).filter(Boolean).forEach(function(t){t.name||console.warn("Name is missing",t),t.sprite?e.load.spritesheet(t.name,t.sprite,g,g):e.load.image(t.name,t.textures[0])})}},{key:"addSprite",value:function(e,t,n){var i=this.add.sprite(e,t,n);return i.animations.add("spin"),i.animations.play("spin",4,!0),i}},{key:"addLabel",value:function(e,t,n){var i=this.add.retroFont("font",32,32,Phaser.RetroFont.TEXT_SET1),r=this.add.image(e,t,i),a=y[n]||1;return r.scale.setTo(a,a),i.multiLine=!0,i}},{key:"create",value:function(){var e=this,t=this.map,n=t.size,i=n.width,r=n.height,a=t.spawn,s=t.finish;this.stats={lives:this.map.lives,gold:this.map.gold,unitsToKill:0,wave:0},this.physics.startSystem(Phaser.Physics.ARCADE),this.stage.backgroundColor=16777215,this.add.tileSprite(0,0,i*g,r*g,"grass"),this.statsLabel=this.addLabel(5,5,"m"),this.start=this.addSprite(a.x*g,a.y*g,"spawn"),this.finish=this.addSprite(s.x*g,s.y*g,"spawn"),this.game.physics.arcade.enable(this.finish),this.towers=this.add.group(),this.units=this.add.physicsGroup(),this.bullets=this.add.physicsGroup(),this.towerAllowedPlacesCache={},this.mapObjects=new Array(this.map.size.height).fill().map(function(t){return new Array(e.map.size.width).fill(0)}),this.cursor=this.add.sprite(),this.cursor.tint=16711680,this.cursor.visible=!1,o.towers.forEach(function(t,n){var i=e.add.button(640,g*n,t.name,function(){return e.selectTowerToBuild(t)});i.width=g,i.height=g}),this.esc=this.game.input.keyboard.addKey(Phaser.Keyboard.ESC),this.runWave()}},{key:"runWave",value:function(){this.stats.unitsToKill=this.map.waves[this.stats.wave].count,this.time.events.repeat(2e3,this.stats.unitsToKill,this.spawnUnit.bind(this))}},{key:"spawnUnit",value:function(){var e=this.map.waves[this.stats.wave].unit,t=(0,u.scale)(this.map.spawn,g),n=t.x,i=t.y,r=new f["default"](this.game,e,n,i);this.units.add(r),this.updatePath(r)}},{key:"updatePath",value:function(e){var t=(0,c["default"])((0,u.scale)(e,1/g),this.map.finish,this.mapObjects).slice(1).map(function(e){return(0,u.scale)(e,g)});e.setPath(t)}},{key:"spawnTower",value:function(e,t){this.isAllowToBuild(e,t)&&(this.towers.add(new d["default"](this.game,this.towerToBuild,e,t)),this.stats.gold-=this.towerToBuild.price,this.mapObjects[t/g][e/g]=1,this.towerAllowedPlacesCache={},this.units.forEachExists(this.updatePath.bind(this)))}},{key:"isAllowToBuild",value:function(e,t){if(this.towerToBuild.price>this.stats.gold)return!1;var n,i=this.units.children.concat(this.towers.children),r={config:this.towerToBuild,x:e,y:t};for(n=0;n<i.length;n++)if(i[n].exists&&(0,u.isOverlap)(i[n],r))return!1;e/=g,t/=g;var a=e+","+t;if(a in this.towerAllowedPlacesCache)return this.towerAllowedPlacesCache[a];var s=this.mapObjects.slice();s[t]=this.mapObjects[t].slice(),s[t][e]=1;var o=(0,c["default"])(this.map.spawn,this.map.finish,s);return this.towerAllowedPlacesCache[a]=Boolean(o)}},{key:"update",value:function(){var e=this.input.mousePointer,t=e.worldX,n=e.worldY,i=(0,u.round)(t,g),r=(0,u.round)(n,g);this.statsLabel.text=("\n			Gold  "+this.stats.gold+"\n			Lives "+this.stats.lives+"\n			Wave  "+(this.stats.wave+1)+" / "+this.map.waves.length+"\n		").trim(),this.towers.callAll("setTarget",null,this.units),this.towers.callAll("fire",null,this.bullets),this.physics.arcade.overlap(this.bullets,this.units,this.attackUnits.bind(this)),this.physics.arcade.overlap(this.finish,this.units,this.unitFinish.bind(this)),this.cursor.position.set(i,r),this.esc.isDown&&(this.cursor.visible=!1,this.towerToBuild=null),this.towerToBuild&&(this.cursor.tint=this.isAllowToBuild(i,r)?65280:16711680),this.input.activePointer.isDown&&this.towerToBuild&&this.spawnTower(i,r)}},{key:"selectTowerToBuild",value:function(e){this.towerToBuild=e,this.cursor.loadTexture(e.name),this.cursor.width=g,this.cursor.height=g,this.cursor.visible=!0}},{key:"attackUnit",value:function(e,t){t.takeDamage(e),e.kill(),t.exists||(this.stats.gold+=t.config.bounty,this.removeUnit(t))}},{key:"unitFinish",value:function(e,t){t.kill(),this.removeUnit(t),this.stats.lives--,this.stats.lives<0&&this.game.state.start("Game")}},{key:"removeUnit",value:function(e){if(this.towers.callAll("clearTarget",null,e),this.bullets.callAll("clearTarget",null,e),this.stats.unitsToKill--,0===this.stats.unitsToKill){if(this.stats.wave++,this.stats.wave>=this.map.waves.length)return this.game.state.start("Game");this.game.time.events.add(5e3,this.runWave.bind(this)).autoDestroy=!0}}},{key:"attackUnits",value:function(e,t){var n=this;return e.config.splash?void this.units.forEach(function(t){(0,u.inSplash)(e,t)&&n.attackUnit(e,t)}):this.attackUnit(e,t)}}]),e}();t["default"]=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(2),l=i(u),c=n(1),h=function(e){function t(){var e;r(this,t);for(var n=arguments.length,i=Array(n),s=0;n>s;s++)i[s]=arguments[s];var o=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return o.health=o.config.health,o.buffs={},o.healthBar=o.game.add.graphics(0,0),o.healthBar.anchor=new Phaser.Point,o.addChild(o.healthBar),o}return s(t,e),o(t,[{key:"update",value:function(){this.path&&(0,c.distance2)(this,this.path[0])<10&&(this.path.length>1?(this.path=this.path.slice(1),this.angle=(0,c.getAngle)(this,this.path[0])):this.path=null),this.applyBuffs();var e=this.health/this.config.health,t=this.config.width,n=100*this.movementSpeed;this.body.velocity.x=Math.cos(this.angle)*n,this.body.velocity.y=Math.sin(this.angle)*n,this.healthBar.clear(),this.healthBar.lineStyle(2,65280,.5),this.healthBar.drawRect(0,0,t*e,2),this.healthBar.lineStyle(2,16711680,.5),this.healthBar.drawRect(t*e,0,t*(1-e),2)}},{key:"applyBuffs",value:function(){var e=void 0;this.movementSpeed=this.config.movementSpeed;for(e in this.buffs){var t=this.buffs[e];t.startAt+t.config.duration<Date.now()?t.sprite.kill():t.config.effect(this)}}},{key:"takeDamage",value:function(e){if(this.health-=e.config.damage,this.health<=0)return this.kill();var t=e.config.buff;if(t){if(!this.buffs[t.name]){var n=this.game.add.sprite(0,4,t.name);n.width=8,n.height=8,this.buffs[t.name]={config:t,sprite:n},this.addChild(n)}this.buffs[t.name].startAt=Date.now()}}},{key:"setPath",value:function(e){this.path=e,this.angle=(0,c.getAngle)(this,e[0])}}]),t}(l["default"]);t["default"]=h},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){var r=n[a(t)];return r=r.x===e.x&&r.y===e.y?r:i(e,r,n),[t].concat(r)}function r(e,t,r){for(var s,o,u,l,c,h,f,p=[e],d={},g={},y={},v=n({},a(e),0),m=r[0].length,w=r.length;p.length;){if(o=p.shift(),o.x===t.x&&o.y===t.y)return i(e,t,y).reverse();for(c=a(o),u=v[c],d[c]=!0,h=[{x:o.x-1,y:o.y},{x:o.x+1,y:o.y},{x:o.x,y:o.y-1},{x:o.x,y:o.y+1}],s=0;4>s;s++)f=h[s],c=a(f),g[c]||f.x<0||f.x>=m||f.y<0||f.y>=w||r[f.y][f.x]||(l=u+1,c in v&&!(l<v[c])||(v[c]=l,y[c]=o),g[c]=!0,p.push(f))}return null}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=function(e){return e.x+","+e.y};Math.abs},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={lives:3,gold:100,size:{width:20,height:10},spawn:{x:0,y:2},finish:{x:19,y:7},waves:[[1,10],[2,10]],map:"\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	11111111111111111111\n	"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.map.split("\n").filter(Boolean).map(function(e){return e.trim().split("").map(Number).map(function(e){return h[e]})});return t[e.spawn.y][e.spawn.x]=c.spawn,t[e.finish.y][e.finish.x]=c.spawn,t}function a(e){return e.map(function(e){return{unit:f[e[0]],count:e[1]}})}function s(){var e=l["default"];return o({},e,{map:r(e),waves:a(e.waves)})}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.getFirst=s;var u=n(9),l=i(u),c=n(3),h={0:c.sand,1:c.grass,2:c.rock},f={1:c.peasant,2:c.recruit}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Arrow Tower",type:"tower",textures:["images/tower_1_2.png"],width:32,height:32,movementSpeed:0,attackSpeed:5,price:20,range:250,shot:{name:"Arrow Tower Ammo",textures:["images/shot_1.png"],damage:3,homing:!0,movementSpeed:3,width:10,height:10,death:{width:16,height:16,movementSpeed:0,corpse:0,fastAnimation:!0,textures:["images/explosion_1_1.png","images/explosion_1_2.png","images/explosion_1_3.png"]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Cannon Tower",type:"tower",textures:["images/tower_2_1.png"],width:32,height:32,movementSpeed:0,attackSpeed:.3,price:60,range:250,shot:{textures:["images/shot_2.png"],name:"Cannon Tower Shot",damage:30,homing:!1,splash:30,movementSpeed:1.5,width:10,height:10,death:{width:18,height:18,movementSpeed:0,corpse:0,fastAnimation:!0,textures:["images/explosion_2_1.png","images/explosion_2_2.png","images/explosion_2_3.png"]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Grass",textures:["images/grass_3.png"],width:32,height:32}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Ice Tower",type:"tower",textures:["images/tower_3_1.png"],width:32,height:32,movementSpeed:0,attackSpeed:1,price:30,range:100,shot:{textures:["images/shot_3_1.png"],name:"Ice Tower Shot",damage:5,homing:!0,splash:50,movementSpeed:2,width:20,height:20,buff:{type:"debuff",name:"Ice Slow",duration:2e3,textures:["images/ice_debuf.png"],effect:function(e){e.movementSpeed*=.5}},death:{width:32,height:32,movementSpeed:0,corpse:0,fastAnimation:!0,textures:["images/explosion_3_1.png","images/explosion_3_2.png","images/explosion_3_3.png"]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Peasant",type:"unit",sprite:"images/unit_1.png",width:32,height:32,movementSpeed:.6,bounty:3,health:100,damage:0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Recruit",type:"unit",textures:["images/unit_1_1.png","images/unit_1_2.png"],width:18,height:32,movementSpeed:.6,bounty:5,health:200,damage:0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Rock",textures:["images/rock.png"],width:32,height:32}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Sand",textures:["images/sand.png"],width:32,height:32}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Spawn",textures:["images/spawn_1.png","images/spawn_2.png"],width:32,height:32}}]);